extends layout

block content
  -
    var statusDataArr = [];
    for (var agency in statusData) {
      statusDataArr.push(statusData[agency]);
    }
    statusDataArr = statusDataArr.sort(function (a, b) {
      aName = a.metadata.agency.acronym;
      bName = b.metadata.agency.acronym;
      if (aName > bName) {
        return 1;
      } else if (bName > aName) {
        return -1;
      }
      return 0;
    });
  table
    tr
      th(colspan=2) Agency
      th Code.json Link
      th Status
      th More
    each data in statusDataArr
      tr
        td
          =data.metadata.agency.acronym
        td
          =data.metadata.agency.name
        td
          a(href=data.metadata.agency.code_url)
            =data.metadata.agency.code_url
        td
          if data.status.includes("FAILURE:")
            .failure
              =data.status
          else if data.status.includes("PARTIAL SUCCESS:")
            .warning
              =data.status
          else if data.status.includes("SUCCESS:")
            .success
              =data.status
          else
            =data.status
        td
          if data.issues.length
            a(href="status/" + data.metadata.agency.acronym) view issues &rarr;
